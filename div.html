
<script>
    // Disable right-click on the page
    document.addEventListener('contextmenu', function(e) {
        e.preventDefault(); // This will prevent the context menu from appearing
    });
  </script>

</div>

  <!DOCTYPE html>
  <html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>1pulse online Map</title>
    <link rel="icon" href="https://1pulse.online/images/ipulse-logo.png" type="image/x-icon">
    <link rel="stylesheet" href="styles.css">
<link rel="stylesheet" href="all-styles.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<link rel="manifest" href="/manifest.json">

  </head>
  <body>
    <div id="map"></div>

    <!-- Dark Mode Toggle Button -->
    <button id="modal-button" onclick="pulseopenModal()">
      <img src="https://i.ibb.co/zTjNBhFK/1pulse-online-logo-line.png" alt="1Pulse" style="width: 50px; height: 50px; vertical-align: middle;">
    </button>

    <!-- Modal for Greater Johannesburg Neighborhood Oversight -->
  <div id="gjnoModal" class="gjno-modal">
    <div class="gjno-modal-content">
      <span class="gjno-close" style="color: #2b2b2b; margin: 0px! Important;">&times;</span>
      <div class="cotainer">

        <!-- Section 1: Header, Search Bar, Hero Image -->
        <div class="section-1">
 <header>
            <div class="logo">
                <img src="https://i.ibb.co/S4jWXkFv/1pulse-online-logo-CRc-L3.png" alt="Logo">
                <span></span>
            </div>

            <button id="guest-button" onclick="window.location.href='https://1pulse.online/dashboard/three.html'" style="border-radius:22px; margin-right:10px;">Guest</button>
        </header>
          <header>
            <h1>Community Resources Map</h1>
          </header>
          <!---<div class="search-bar">
            <input type="text" placeholder="Search for resources or issues..." />
          </div>-->
          <div class="hero-image">
            <img src="https://1pulse.online/images/1pulse-promo-map.png" alt="Community map image" />
          </div>
          <div class="image-description">
            <p>This map highlights key community issues and available resources. Explore the markers to find out more.</p>
          </div>
<button id="install-button" style="display: none;">Install App</button>
<script>

let deferredPrompt;
const installButton = document.getElementById('install-button');

// Listen for the 'beforeinstallprompt' event
window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault(); // Prevent the default prompt
  deferredPrompt = e; // Save the event for later
  installButton.style.display = 'block'; // Show the install button
});

// Add a click event listener to the Install button
installButton.addEventListener('click', () => {
  installButton.style.display = 'none'; // Hide the button after it is clicked
  if (deferredPrompt) {
    deferredPrompt.prompt(); // Show the install prompt
    deferredPrompt.userChoice.then((choiceResult) => {
      if (choiceResult.outcome === 'accepted') {
        console.log('User accepted the install prompt');
      } else {
        console.log('User dismissed the install prompt');
      }
      deferredPrompt = null; // Clear the saved event
    });
  }
});


</script>
        </div>

        <!-- Section 2: Resources Description Also has the new Overlay-->

       
     <!--<div class="hero-section">
            <div class="carousel">
                <div class="carousel-item">
                    <img src="https://1pulse.online/images/1pulse-promo-map.png" alt="Post Image">
                    <h3>User Name</h3>
                    <p>This is a sample post. It can contain text, images, or other content.</p>
                </div>
                <div class="carousel-item">
                    <img src="https://1pulse.online/images/1pulse-promo-map.png" alt="Post Image">
                    <h3>User Name</h3>
                    <p>Another sample post with different content.</p>
                </div>
                <div class="carousel-item">
                    <img src="https://1pulse.online/images/1pulse-promo-map.png" alt="Post Image">
                    <h3>User Name</h3>
                    <p>Yet another post for demonstration purposes.</p>
                </div>
            </div>
            <div class="carousel-controls">
                <button id="prev-button">&#10094;</button>
                <button id="next-button">&#10095;</button>
            </div>
        </div>
-->
        <div class="faq-section">
           <div class="overlay-container">
    <!-- FAQ Section with Landing Pop -->

        <div class="content-containe">
           
            <p><span id="typingText" class="typing-text"><strong>The heartbeat of the community.</strong></span></p>

            <!-- Embedded Video -->
            <div class="video-container" style="text-align: center; margin-bottom: 20px; width: 100%; border-radius: 23px;">
                <iframe 
                    src="https://www.youtube.com/embed/fLQwwh5sSWQ" 
                    title="1Pulse Online Video" 
                    frameborder="0" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen 
                    style="width: 100%; height: 200px; max-width: 560px; border-radius: 23px;">
                </iframe>
                <p style="font-size: 14px; margin-top: 10px;">Watch this video to learn more about 1Pulse Online!</p>
            </div>

            <!-- FAQ Section -->
            <div class="faq">
                <button class="faq-question" onclick="toggleAnswer('answer1')">What is 1Pulse Online?</button>
                <div class="faq-answer" id="answer1">
                    <p>1Pulse Online is a map-driven platform that allows community members to post issues and track progress on resolutions.</p>
                </div>

                <button class="faq-question" onclick="toggleAnswer('answer2')">How can I post an alert?</button>
                <div class="faq-answer" id="answer2">
                    <p>Click on the specific map location, enter details, and hit "Post" to share an alert with the community.</p>
                </div>

                <button class="faq-question" onclick="toggleAnswer('answer3')">How long will my post stay on the platform?</button>
                <div class="faq-answer" id="answer3">
                    <p>Posts remain visible until they are resolved or, in the case of events, until they conclude.</p>
                </div>

                <button class="faq-question" onclick="toggleAnswer('helpDeskAnswer')">Community Help Desk</button>
                <div class="faq-answer" id="helpDeskAnswer">
                    <img style="width: 100%; border-radius: 23px;" src="images/Back-to-School-Stationery-Drive-.jpg" alt="Back to School Drive">
                    <p>The 1Pulse Community Help Desk serves as a vital resource, assisting families in need and improving the quality of life in the community.</p>
                    <p>Its mission is to create safer environments and enhance well-being through active community engagement.</p>
                    <div class="cta-container">
                        <a href="https://m.youtube.com/watch?v=fLQwwh5sSWQ&t=59s" class="cta-button">Check Progress</a>
                    </div>
                </div>

                <button class="faq-question" onclick="toggleAnswer('promoAnswer')">Business Promotion (R250 for 2 weeks)</button>
                <div class="faq-answer" id="promoAnswer">
                    <img style="width: 100%; border-radius: 23px;" src="https://i.ibb.co/rt7sYXv/easy-cars.jpg" alt="Business Promotion">
                    <p>Event organizers and businesses can post promotions to inform the community. Advertisements stay live for two weeks at R250.</p>
                    <p>Promote your business and increase visibility within the local community.</p>
                    <div class="cta-container">
                        <a href="https://errandcamel.co.za/carhire" class="cta-button">Sign Up</a>
                    </div>
                </div>

                <button class="faq-question" onclick="toggleAnswer('ComHubAnswer')">Community Development Hub</button>
                <div class="faq-answer" id="ComHubAnswer">
                    <img style="width: 100%; border-radius: 23px;" src="images/Back-to-School-Stationery-Drive-.jpg" alt="Community Development Hub">
                    <p>The 1Pulse Community Development Hub provides essential resources and support to foster local growth and collaboration.</p>
                    <p>By working together, we aim to build inclusive spaces that empower individuals and businesses alike.</p>
                    <div class="cta-container">
                        <a href="https://m.youtube.com/watch?v=fLQwwh5sSWQ&t=59s" class="cta-button">Check Progress</a>
                    </div>
                </div>

                <button class="faq-question" onclick="toggleAnswer('schoolAnswer')">Marker Resources</button>
                <div class="faq-answer" id="schoolAnswer">
                     <!-- Section 3: Markers and Sponsors -->
        <div class="section-3">
          <!-- Marker Divs -->
          <div class="markers">
            
            <div class="marker-item">
              <img src="https://1pulse.online/images/user-here.png" alt="Marker Icon 1" />
              <div class="marker-info">
                <h4>You Are Here</h4>
                <p>Click the clossest next to this icon and a window will show up so you can make a post.</p>
              </div>
            </div>
            <div class="marker-item">
              <img src="https://1pulse.online/images/good deed icon.png" alt="Marker Icon 2" />
              <div class="marker-info">
                <h4>Good Deeds</h4>
                <p>Posts about anything good in the community that needs attention.</p>
              </div>
            </div>
            <div class="marker-item">
              <img src="https://1pulse.online/images/crime.png" alt="Marker Icon 3" />
              <div class="marker-info">
                <h4>Unresolved Crime</h4>
                <p>Posts relating to all types of crimes, mostly violant.</p>
              </div>
            </div>
            <div class="marker-item">
              <img src="https://1pulse.online/images/property.png" alt="Marker Icon 4" />
              <div class="marker-info">
                <h4>Service Delivery</h4>
                <p>Posts relating to municipal service delivery to forster countabilty .</p>
              </div>
            </div>
            <div class="marker-item">
              <img src="https://1pulse.online/images/Looting.png" alt="Marker Icon 5" />
              <div class="marker-info">
                <h4>Looting/Vandalism</h4>
                <p>This is where the crime is unclear but yet affects the publiuc.</p>
              </div>
            </div>
            <div class="marker-item">
              <img src="https://1pulse.online/images/xenophobia.png" alt="Marker Icon 5" />
              <div class="marker-info">
                <h4>Non-compliance</h4>
                <p>When a business or public facility does not comply with the law, this marker also shows compliant entities for public updates.
                </p>
              </div>
            </div>
            <div class="marker-item">
              <img src="https://1pulse.online/images/Health-location.png" alt="Marker Icon 6" />
              <div class="marker-info">
                <h4>Health</h4>
                <p>Issues of health that affect the general publicu.</p>
              </div>
            </div>
          </div>
                </div>
            </div>

            <!-- Proceed to App Button --
            <div class="cta-container">
                <a href="https://1pulse-online-beta.netlify.app/" class="cta-button">Proceed to Map</a>
            </div>-->
        </div>
    </div>
</div> 

      

          <!-- Sponsors Divs --
          <div class="sponsors">
            <h3>Sponsors</h3>
            <div class="sponsor-item">
              <img src="sponsor1-logo.jpg" alt="Sponsor 1" />
              <div class="sponsor-info">
                <h4>Sponsor 1</h4>
                <p>Details about Sponsor 1's contribution.</p>
              </div>
            </div>
            <div class="sponsor-item">
              <img src="sponsor2-logo.jpg" alt="Sponsor 2" />
              <div class="sponsor-info">
                <h4>Sponsor 2</h4>
                <p>Details about Sponsor 2's contribution.</p>
              </div>
            </div>
            <div class="sponsor-item">
              <img src="sponsor3-logo.jpg" alt="Sponsor 3" />
              <div class="sponsor-info">
                <h4>Sponsor 3</h4>
                <p>Details about Sponsor 3's contribution.</p>
              </div>
            </div>
            <div class="sponsor-item">
              <img src="sponsor4-logo.jpg" alt="Sponsor 4" />
              <div class="sponsor-info">
                <h4>Sponsor 4</h4>
                <p>Details about Sponsor 4's contribution.</p>
              </div>
            </div>
            <div class="sponsor-item">
              <img src="sponsor5-logo.jpg" alt="Sponsor 5" />
              <div class="sponsor-info">
                <h4>Sponsor 5</h4>
                <p>Details about Sponsor 5's contribution.</p>
              </div>
            </div>
            <div class="sponsor-item">
              <img src="sponsor6-logo.jpg" alt="Sponsor 6" />
              <div class="sponsor-info">
                <h4>Sponsor 6</h4>
                <p>Details about Sponsor 6's contribution.</p>
              </div>
            </div>
            <div class="sponsor-item">
              <img src="sponsor7-logo.jpg" alt="Sponsor 7" />
              <div class="sponsor-info">
                <h4>Sponsor 7</h4>
                <p>Details about Sponsor 7's contribution.</p>
              </div>
            </div>
          </div>-->
        </div>
      </div>

       <!-- Section 2: Resources Description -->
   <div class="section-2">
   <h2>First Responders</h2>
    <p>This indicator helps us see who solved what problem. This is good for businesses and government departments dedicated to helping the community.</p>
  </div>

    <h2>Resources</h2>
    <p>Explore the various resources available within the community, designed to assist you in solving problems and improving quality of life.</p>

  <div id="modal-images-container" class="gjno-images-container"></div>

        <!-- Images from the logo-nav section will be inserted here dynamically -->
      </div>
    </div>


    <!-- Logo Navigation -->
    <div id="logo-nav">
      <div id="logo-container">
          <div class="logo" data-modal-id="1"> 
              <img src="https://1pulse.online/images/errand%20camel%20logo.png" alt="Logo 1">
          </div>
          <div class="logo" data-modal-id="2">
              <img src="https://1pulse.online/images/bonizluu-fav.png" alt="Logo 2">
          </div>
          <div class="logo" data-modal-id="3">
            <img src="https://1pulse.online/images/hillbrow.jpeg" alt="Logo 3">
        </div>
          <div class="logo" data-modal-id="4">
              <img src="https://1pulse.online/images/Africa%20City.png" alt="Logo 4">
          </div>
          <div class="logo" data-modal-id="5">
              <img src="https://i.ibb.co/S4jWXkFv/1pulse-online-logo-CRc-L3.png" alt="Logo 5">
          </div>
          <div class="logo" data-modal-id="6">
              <img src="https://1pulse.online/images/Tae-Trax-Logo.png" alt="Logo 6">
          </div>
      </div>
    </div>
 </div>
    <!-- Modal for logos -->
  <div id="myModal" class="modal-brah">
    <div class="modal-content-brah">
      <span class="close-brah">&times;</span>
      <h2 class="modal-title-brah"></h2>
      <p class="modal-description-brah"></p>
      <div class="image-container">
        <img class="modal-image-brah" src="" alt="Modal Image">

      </div>
    </div>
  </div>


    <!-- Modal for creating a new post -->
  <div class="modal-overlay" id="modal-overlay"></div>
  <div class="modal" id="modal">
    <h3>Create a Post</h3>
    <form id="postForm" enctype="multipart/form-data">
      <div class="form-field">
        <label for="name">Name:</label>
        <input type="text" id="name" name="name" required />
      </div>
      <div class="form-field">
        <label for="surname">Surname:</label>
        <input type="text" id="surname" name="surname" required />
      </div>
      <div class="form-field">
        <label for="description">Description:</label>
        <textarea id="description" name="description" required></textarea>
      </div>
      <div class="form-field">
        <label for="type">Type of Post:</label>
        <div class="custom-select-container">
          <select id="type" name="type" required class="custom-select">
            <option value="" disabled selected>Select a type...</option>
  <option value="Good Deeds">Good Deeds</option>
            <option value="Health">Health</option>
            <option value="Service Delivery">Service Delivery</option>
            <option value="Violent Crime">Violent Crime</option>
            <option value="Looting">Looting</option>
            <option value="Non-compliance">Non-compliance</option>
          </select>
        </div>
      </div>
      <div class="form-field">
        <label for="image">Image:</label>
        <input type="file" id="image" name="image" required />
      </div>
      <button type="submit">Save Post</button>
      <div id="spinner" style="display: none;">Submitting...</div>

    </form>
  </div>


    <!-- Modal for viewing a post -->
    <div class="modal-overlay" id="viewModal-overlay"></div>
    <div class="modal" id="viewModal">
      <div id="postDetails"></div>
      <h4>Comments:</h4>
      <div id="commentsList"></div>
      <form id="commentForm">
        <div class="form-field">
          <label for="commentName">Your Name:</label>
          <input type="text" id="commentName" name="commentName" required />
        </div>
        <div class="form-field">
          <label for="commentText">Add a Comment:</label>
          <input type="text" id="commentText" name="commentText" required />
        </div>
        <button type="submit">Add Comment</button>
      </form>
    </div>

    <p id="gyroscope"></p> <!-- Degrees Text -->
    <div id="penIcon">
        <!-- Pen Image -->
        <img src="compass.png" alt="Pen Icon">
    </div>

    <script>
        // Handle device orientation (compass and gyroscope)
        let currentHeading = 0;  // To store the compass heading

        if (window.DeviceOrientationEvent) {
            window.addEventListener('deviceorientation', function(event) {
                // Get the heading value (alpha) from the compass
                const heading = event.alpha;

                if (heading !== null) {
                    // Update the gyroscope degrees text
                    document.getElementById("gyroscope").textContent = `Facing: ${Math.round(heading)}Â°`;

                    // Update the pen icon's rotation based on the device's heading
                    const penIcon = document.getElementById("penIcon");
                    penIcon.style.transform = `rotate(${heading}deg)`; // Rotate the pen image
                }
            });
        } else {
            alert("Device Orientation is not supported on your device.");
        }
    </script>
<script>



if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/service-worker.js').then(() => {
    console.log('Service Worker registered');
  });
}

let deferredPrompt;

window.addEventListener('beforeinstallprompt', (e) => {
  e.preventDefault();
  deferredPrompt = e;
  // Show install button or message
});

document.getElementById('install-button').addEventListener('click', () => {
  if (deferredPrompt) {
    deferredPrompt.prompt();
    deferredPrompt.userChoice.then((choiceResult) => {
      if (choiceResult.outcome === 'accepted') {
        console.log('App installed');
      }
      deferredPrompt = null;
    });
  }
});

</script>
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const overlay = document.getElementById('overlay-main');
            const showOverlayButton = document.getElementById('show-overlay');
            let startX = 0;
            let isDragging = false;

            overlay.addEventListener('touchstart', function(e) {
                startX = e.touches[0].clientX;
                isDragging = true;
            });

            overlay.addEventListener('touchmove', function(e) {
                if (!isDragging) return;
                const currentX = e.touches[0].clientX;
                const diff = startX - currentX;
                if (diff > 50) { 
                    overlay.style.transform = 'translateX(-100%)';
                    showOverlayButton.style.display = 'block';
                    isDragging = false;
                }
            });

            showOverlayButton.addEventListener('click', function() {
                overlay.style.transform = 'translateX(0)';
                showOverlayButton.style.display = 'none';
            });

            const carousel = document.querySelector('.carousel');
            const prevButton = document.getElementById('prev-button');
            const nextButton = document.getElementById('next-button');
            let currentIndex = 0;

            function updateCarousel() {
                const offset = -currentIndex * 320;
                carousel.style.transform = `translateX(${offset}px)`;
            }

            function nextSlide() {
                currentIndex = (currentIndex + 1) % carousel.children.length;
                updateCarousel();
            }

            function prevSlide() {
                currentIndex = (currentIndex - 1 + carousel.children.length) % carousel.children.length;
                updateCarousel();
            }

            prevButton.addEventListener('click', prevSlide);
            nextButton.addEventListener('click', nextSlide);

            let touchStartX = 0;
            let touchEndX = 0;

            carousel.addEventListener('touchstart', function(e) {
                touchStartX = e.touches[0].clientX;
            });

            carousel.addEventListener('touchend', function(e) {
                touchEndX = e.changedTouches[0].clientX;
                handleSwipe();
            });

            function handleSwipe() {
                const swipeDistance = touchStartX - touchEndX;
                if (swipeDistance > 50) {
                    nextSlide();
                } else if (swipeDistance < -50) {
                    prevSlide();
                }
            }
        });
    </script>
 <script>
  // Function to toggle the visibility of FAQ answers
function toggleAnswer(answerId) {
    var answer = document.getElementById(answerId);
    if (answer.style.display === "none" || answer.style.display === "") {
        answer.style.display = "block";
    } else {
        answer.style.display = "none";
    }
}



// JavaScript for the typing effect


// Start the typing effect when the page loads
window.onload = function() {
    typeWriter();
};



// JavaScript for the typing effect
let typingText = document.getElementById('typingText');
let textArray = ['The heart beat of the community.'];
let currentText = '';
let textIndex = 0;
let isErasing = false;
let eraseSpeed = 100;  // Speed of erasing
let typeSpeed = 150;   // Speed of typing

function typeWriter() {
    // Check if we are currently erasing or typing
    if (isErasing) {
        currentText = currentText.slice(0, -1);  // Remove the last character
        typingText.textContent = currentText;

        // If the text has been fully erased, start typing again
        if (currentText === '') {
            isErasing = false;
            textIndex = 0;  // Reset the text index to start typing again
            setTimeout(typeWriter, typeSpeed); // Delay before starting to type
        } else {
            setTimeout(typeWriter, eraseSpeed);
        }
    } else {
        // Add the next character from the text array
        currentText += textArray[0][textIndex];  
        typingText.textContent = currentText;

        // If the entire text is typed, start erasing
        if (currentText === textArray[0]) {
            isErasing = true;
            setTimeout(typeWriter, 1000);  // Wait a moment before erasing starts
        } else {
            textIndex++;  // Move to the next character
            setTimeout(typeWriter, typeSpeed);
        }
    }
}

// Start the typing effect loop
typeWriter();



 </script>

    <!-- Custom JS -->
    <script src="logic.js"></script>
  </body>
  </html>